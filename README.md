### 프로젝트 명	 
 모두의 예약

### 수행기간	
2024년 8월 6일 ~ 2024년 9월 

### 수행인원	 
본인 외 3인 

### 프로젝트 목표/소개	
예약 중개 플랫폼 "모두의 예약"

"모두의 예약"은 네일, 헤어, 마사지, 과외, 카페, 음식점 등 다양한 서비스를 

한 곳에서 쉽게 예약할 수 있는 플랫폼을 목표로 하고 있습니다. 

이 프로젝트를 통해 사용자는 필요한 서비스를 간편하게 찾고 예약할 수 있으며, 

저는 이를 통해 웹 개발 기술을 연마하고 실무적인 경험을 쌓고자 합니다. 

사용자 중심의 인터페이스와 효율적인 예약 시스템을 구축하며, 

웹 개발자로서의 역량을 확장하는 것을 목표로 합니다.


### 개발환경 (사용도구/언어)	
Spring Tool Suite 3, Java, JSP, MyBatis

Visual Studio Code, JavaScript, HTML5, CSS3, J-Query, Ajax, Bootstrap

Oracle SQL Developer, Oracle

Sourcetree, Git, GitHub 

Spring Security, JavaMail API, Cool SMS API, Daum Postcode API


### 담당역할	 

#### 본인
- 사이트의 전반적인 구조와 흐름(회원가입, 예약하기, 예약받기) 기획, 개발
- 데이터베이스 설계
- Bootstrap을 활용한 디자인
- Git, GitHub, Sourcetree를 활용한 팀 협업 환경 구축
  
#### 팀원
- 지도api, 사업자 회원 검색 기능, 파일 업로드, 답글형 게시판, 사업자 서비스 상품등록 관리 등



### 수행 결과물

##### ERD
![image](https://github.com/user-attachments/assets/5cf38545-eec2-454f-9e09-c944ce9a690a)

#


![image](https://github.com/user-attachments/assets/18fdda4c-2ec2-4e95-9ded-1d88eda6c63a)

![image](https://github.com/user-attachments/assets/8e673ed5-092b-49fb-bc7e-eec149b8132f)

![image](https://github.com/user-attachments/assets/347ee299-ad18-4b56-9706-faee2a1a56c4)

![image](https://github.com/user-attachments/assets/22df4f54-bd12-4673-a66f-ac2667f7bd98)

회원 가입 : Spring Security를 활용한 권한 관리 및 비밀번호 암호화

Ajax 통신을 활용한 이메일(아이디), 전화번호 중복 검사,

정규식을 활용한 입력값 검증, 

JavaMail API, Cool SMS API를 활용한 이메일, sms인증,

Daum Postcode API를 활용한 주소 입력


#

![image](https://github.com/user-attachments/assets/1335cc69-fdc9-4a61-bb3c-5583546b1f0c)

사업자 회원 전환시 추가 기입되는 사업자 정보는 회원(users)테이블과 별개로 

이메일(아이디)을 Foreign Key로 하여 다른 테이블(vendor)에 저장(insert)되고, 

권한이 ROLE_MEMBER에서 ROLE_VENDOR로 전환(update)되는 로직이기 때문에, 

사업자 가입을 하였지만 권한은 일반회원 그대로인 경우를 방지하기 위해 해당 부분을 트랜잭션 처리함

#

![image](https://github.com/user-attachments/assets/30d33139-7fa4-47ce-a0e2-8c166bbb6b80)

사업자의 마이페이지 :

내 사업장 정보 : 사업장 정보(소개글)를 등록하고 수정함

내 서비스 등록 : 사업자가 서비스 할 항목(이름, 설명, 가격, 예상 필요 시간 등)을 등록함

스케줄 관리 : 사업자가 서비스 할 날짜와 시간을 관리함

예약 내역 보기 : 예약(주문)리스트를 보여줌

#

![image](https://github.com/user-attachments/assets/6c053158-6994-43b5-ba34-bc004313e009)

사업자의 월별 스케줄 조회 :

 데이터 요청 및 처리 : 사업자가 특정 월을 선택하면 
 
 클라이언트는 Ajax 요청을 통해 서버로 해당 월에 대한 데이터를 요청하고, 
 
 응답 받은 데이터를 기반으로 클라이언트는 월별로 등록된 날짜와 공개여부를 HTML테이블 형태로 화면에 표시함
 
 사업자가 등록된 날짜를 클릭하면 해당 날짜의 스케줄을 수정할 수 있는 페이지로 이동하며, 
 
 등록되지 않은 날을 새로 등록 하려면 ‘일일 스케줄 등록하러 가기’ 버튼을 눌러서 등록함

#

![image](https://github.com/user-attachments/assets/06f48fb4-8ad4-4a16-914a-79f958e056e1)

사업자의 일일 스케줄 등록 :

하루 24시간을 30분씩 나누어 48개 단위의 시간으로, 

예약을 받을(노란색)시간은 1, 아닌 시간은 0으로 하여 

총 48개의 0과 1의 문자열로 예약시간대를 데이터베이스에 저장함

(예약이 가능한 1의 값은 회원에게 예약이 되어지면 2의 값을 가지게 됨)

날짜를 선택하고 예약을 받을 시간대를 클릭하고 등록을 눌러서 저장함

#

![image](https://github.com/user-attachments/assets/31a3d23f-f973-4e8a-98b5-d25ce4cb2657)

사업자의 일일 스케줄 수정 :

예약(주문)이 들어온 시간대(2값)는 가장 어두운 회색으로 수정이 불가능하게 하였으며, 

사업자가 스케줄 수정 버튼을 누르면 Ajax 통신을 통해 

데이터베이스에 해당 날짜는 예약이 불가능한 상태로 변경되게 처리하여 일반회원에게 노출되지 않음.

(수정하는 동안 해당 날짜의 신규 예약을 방지함)

#

![image](https://github.com/user-attachments/assets/f5bda973-1917-4689-a8d8-706ac1f86b32)

일반회원에게 해당 날짜가 보여진 이후에 수정상태로 들어갔다 하더라도 

일반회원의 예약주문 완료 전에 한번 더 해당 날짜가 예약이 가능한 상태 인지 체크하는 로직을 추가하여 

주문 과정에서 일어날 수 있는 사고를 방지함. 

수정완료를 누르면 다시 예약이 가능한 상태로 변경됨. 

#

![image](https://github.com/user-attachments/assets/53debb82-3149-409f-98de-25be271b68c9)

사업자의 예약 목록 :

 입금대기, 입금완료, 이용완료(구매확정), 취소대기, 취소완료 등 상태에 맞는 예약주문들을 리스트로 보여줌
 
Ajax 통신을 통해 각 주문 상태에 맞는 데이터를 JSON 형식으로 받아와, 전체 주문 건수를 기준으로 페이지네이션을 구현함. 

 한 페이지에 10개의 주문을 표시하며, 초기 설정으로 첫 페이지(1번 페이지)의 주문 10개를 받아와 테이블 형식으로 출력함, 
 
 페이지를 클릭하면 선택한 페이지에 해당하는 주문 10건만 서버에 요청하여 받아옴

#

### 프로젝트 후기

온라인 쇼핑몰에서의 근무 경험을 통해 주문 관련 문제(중복 주문, 품절 주문, 수정 미반영 주문 등)에 대해 주의를 기울였습니다. 

이러한 문제를 방지하기 위한 로직을 구상하고 시스템이 올바르게 작동하는 것을 확인하면서 성취감을 느꼈습니다.

 예약 가능 시간대를 표현할 때 각각의 날짜와 각각의 시간을 개별적으로 저장하는 대신, 
 
하나의 날짜와 한 세트의 문자열(48개의 0,1,2로 예약불가 0, 예약가능 1, 예약됨 2)로 

하루치를 한 번에 처리할 수 있게 구상해보았습니다. 

이렇게 함으로써 데이터베이스의 효율성을 향상시켰고 예약 가능 여부를 간편하게 관리할 수 있었습니다.

 현재 월별 스케줄을 테이블 형태의 리스트로 보여주고 있는 상황인데 
 
풀캘린더라는 달력 API를 프로젝트 중반 이후에야 알게 되어 프로젝트에 적용해보지 못한 점이 아쉬웠습니다. 

다양한 API를 알고 있어야 필요시 적재적소에 활용이 가능하겠다 라는 생각이 들었습니다. 

프로젝트를 진행하면서 학원에서 이론을 배우고 실습하는 것도 중요하지만 

이제는 실무에서 직접 경험을 쌓는 것이 필요하다는 것을 느꼈습니다. 

현업에 나가서 실제 프로젝트에 참여하며 더 깊은, 더 많은 기술들을 익히고 싶습니다.

